<html>
    <body>
        <h2> Firebase IoT Weather Monitor using Object Data
            <h2 id="temp"> </h2>
            <h2 id="humi"> </h2>

            <script type="module">
                // Import the functions you need from the SDKs you need
                import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.1/firebase-app.js";
                import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.4.1/firebase-analytics.js";
                import { getDatabase, ref, set, get, onValue, child, onChildAdded } from "https://www.gstatic.com/firebasejs/9.4.1/firebase-database.js";
                // TODO: Add SDKs for Firebase products that you want to use
                // https://firebase.google.com/docs/web/setup#available-libraries

                // Your web app's Firebase configuration
                // For Firebase JS SDK v7.20.0 and later, measurementId is optional
                const firebaseConfig = {
                    apiKey: "AIzaSyD-JtbrRluHNBjc_AMeFvSNyuiA8hQk8qc",
                    authDomain: "dht11-firebase-1be7c.firebaseapp.com",
                    databaseURL: "https://dht11-firebase-1be7c.firebaseio.com",
                    projectId: "dht11-firebase-1be7c",
                    storageBucket: "dht11-firebase-1be7c.appspot.com",
                    messagingSenderId: "660583975030",
                    appId: "1:660583975030:web:b5645538a78964a123b757",
                    measurementId: "G-PEYGEXJT7C"
                };

                // Initialize Firebase
                const app = initializeApp(firebaseConfig);
                const analytics = getAnalytics(app);
                // Get a reference to the database service
                const db = getDatabase(app);
                // console.log(db);

                const dbRef = ref(db, 'logDHT/');

                onChildAdded(dbRef, (data) => {
                    var newHumi = data.val().humidity;
                    var newTemp = data.val().temperature;
                    console.log(newTemp);
                    console.log(newHumi)
                    humi.innerText = "Humidity : " + newHumi + "%";
                    temp.innerText = "Temperature : " + newTemp + "â„ƒ";
                });

        </script>
    </body>
</html>